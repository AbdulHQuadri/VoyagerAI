const localDictionary = {
    "es": {
      "hola": {
        translations: { "en": "Hello" },
        definition: "A common greeting used when meeting someone",
        partOfSpeech: "interjection",
        pronunciation: "oh-lah",
        examples: ["¡Hola! ¿Cómo estás?", "Hola a todos"]
      },
      "adiós": {
        translations: { "en": "Goodbye" },
        definition: "A farewell expression used when leaving or ending a conversation",
        partOfSpeech: "interjection",
        pronunciation: "ah-dee-OHS",
        examples: ["¡Adiós, hasta mañana!", "Adiós, que tengas un buen día"]
      },
      "gracias": {
        translations: { "en": "Thank you" },
        definition: "An expression of gratitude",
        partOfSpeech: "interjection",
        pronunciation: "GRAH-see-as",
        examples: ["Gracias por tu ayuda", "Muchas gracias"]
      },
      "por favor": {
        translations: { "en": "Please" },
        definition: "A polite expression used when making a request",
        partOfSpeech: "adverbial phrase",
        pronunciation: "por fah-VOR",
        examples: ["Por favor, pásame el libro", "¿Me ayudas, por favor?"]
      },
      "buenos días": {
        translations: { "en": "Good morning" },
        definition: "A greeting used in the morning until noon",
        partOfSpeech: "phrase",
        pronunciation: "BWEH-nos DEE-as",
        examples: ["Buenos días, ¿cómo amaneciste?", "Buenos días a todos"]
      },
      "buenas tardes": {
        translations: { "en": "Good afternoon" },
        definition: "A greeting used from noon until evening",
        partOfSpeech: "phrase",
        pronunciation: "BWEH-nas TAR-des",
        examples: ["Buenas tardes, profesor", "Buenas tardes, bienvenidos"]
      },
      "buenas noches": {
        translations: { "en": "Good evening/Good night" },
        definition: "A greeting used in the evening or as a farewell when going to bed",
        partOfSpeech: "phrase",
        pronunciation: "BWEH-nas NO-ches",
        examples: ["Buenas noches, hasta mañana", "Buenas noches a todos"]
      },
      "amigo": {
        translations: { "en": "Friend" },
        definition: "A person with whom one has a bond of mutual affection",
        partOfSpeech: "noun",
        pronunciation: "ah-MEE-go",
        examples: ["Él es mi mejor amigo", "Somos buenos amigos"]
      },
      "agua": {
        translations: { "en": "Water" },
        definition: "A transparent, odorless, tasteless liquid",
        partOfSpeech: "noun",
        pronunciation: "AH-gwa",
        examples: ["Quiero un vaso de agua", "El agua está fría"]
      },
      "comida": {
        translations: { "en": "Food" },
        definition: "Any nutritious substance that is eaten or drunk",
        partOfSpeech: "noun",
        pronunciation: "co-MEE-da",
        examples: ["La comida está lista", "Me gusta la comida mexicana"]
      },
      "bien": {
        translations: { "en": "Well, good, fine" },
        definition: "In a satisfactory, proper or pleasing manner",
        partOfSpeech: "adverb",
        pronunciation: "bee-EN",
        examples: ["Estoy bien, gracias", "Todo salió bien"]
      },
      "casa": {
        translations: { "en": "House, home" },
        definition: "A building for human habitation",
        partOfSpeech: "noun",
        pronunciation: "KAH-sa",
        examples: ["Mi casa es pequeña", "Vamos a tu casa"]
      },
      "tiempo": {
        translations: { "en": "Time, weather" },
        definition: "The indefinite continued progress of existence; or atmospheric conditions",
        partOfSpeech: "noun",
        pronunciation: "tee-EM-po",
        examples: ["No tengo tiempo", "¿Cómo está el tiempo hoy?"]
      }
    },
    "en": {
      "hello": {
        translations: { "es": "hola" },
        definition: "A greeting used when meeting someone",
        partOfSpeech: "interjection",
        pronunciation: "hə-LŌ",
        examples: ["Hello, how are you?", "Hello everyone"]
      },
      "goodbye": {
        translations: { "es": "adiós" },
        definition: "A farewell expression used when leaving or ending a conversation",
        partOfSpeech: "interjection",
        pronunciation: "gʊd-BYE",
        examples: ["Goodbye, see you tomorrow", "I have to go now, goodbye"]
      },
      "thank you": {
        translations: { "es": "gracias" },
        definition: "An expression of gratitude",
        partOfSpeech: "phrase",
        pronunciation: "THANK-yoo",
        examples: ["Thank you for your help", "Thank you very much"]
      },
      "please": {
        translations: { "es": "por favor" },
        definition: "A polite expression used when making a request",
        partOfSpeech: "adverb",
        pronunciation: "pleez",
        examples: ["Please pass me the book", "Can you help me, please?"]
      },
      "good morning": {
        translations: { "es": "buenos días" },
        definition: "A greeting used in the morning until noon",
        partOfSpeech: "phrase",
        pronunciation: "gʊd MOR-ning",
        examples: ["Good morning, how did you sleep?", "Good morning everyone"]
      },
      "good afternoon": {
        translations: { "es": "buenas tardes" },
        definition: "A greeting used from noon until evening",
        partOfSpeech: "phrase",
        pronunciation: "gʊd AF-ter-noon",
        examples: ["Good afternoon, professor", "Good afternoon, welcome"]
      },
      "good night": {
        translations: { "es": "buenas noches" },
        definition: "A farewell expression used in the evening or when going to bed",
        partOfSpeech: "phrase",
        pronunciation: "gʊd NYTE",
        examples: ["Good night, see you tomorrow", "Good night everyone"]
      },
      "friend": {
        translations: { "es": "amigo" },
        definition: "A person with whom one has a bond of mutual affection",
        partOfSpeech: "noun",
        pronunciation: "frend",
        examples: ["He is my best friend", "We are good friends"]
      },
      "water": {
        translations: { "es": "agua" },
        definition: "A transparent, odorless, tasteless liquid",
        partOfSpeech: "noun",
        pronunciation: "WAW-ter",
        examples: ["I want a glass of water", "The water is cold"]
      },
      "food": {
        translations: { "es": "comida" },
        definition: "Any nutritious substance that is eaten or drunk",
        partOfSpeech: "noun",
        pronunciation: "food",
        examples: ["The food is ready", "I like Mexican food"]
      },
      "well": {
        translations: { "es": "bien" },
        definition: "In a good or satisfactory manner",
        partOfSpeech: "adverb",
        pronunciation: "wel",
        examples: ["I'm well, thank you", "Everything went well"]
      },
      "house": {
        translations: { "es": "casa" },
        definition: "A building for human habitation",
        partOfSpeech: "noun",
        pronunciation: "hows",
        examples: ["My house is small", "Let's go to your house"]
      },
      "time": {
        translations: { "es": "tiempo" },
        definition: "The indefinite continued progress of existence",
        partOfSpeech: "noun",
        pronunciation: "tyme",
        examples: ["I don't have time", "What time is it?"]
      },
      "weather": {
        translations: { "es": "tiempo" },
        definition: "The state of the atmosphere at a particular place and time",
        partOfSpeech: "noun",
        pronunciation: "WE-ther",
        examples: ["How's the weather today?", "The weather is nice"]
      },
      "yes": {
        translations: { "es": "sí" },
        definition: "Used to give an affirmative response",
        partOfSpeech: "adverb",
        pronunciation: "yes",
        examples: ["Yes, I agree", "Yes, that's correct"]
      },
      "no": {
        translations: { "es": "no" },
        definition: "Used to give a negative response",
        partOfSpeech: "adverb",
        pronunciation: "no",
        examples: ["No, I don't think so", "No, thank you"]
      },
      "help": {
        translations: { "es": "ayuda" },
        definition: "The action of helping someone; assistance",
        partOfSpeech: "noun/verb",
        pronunciation: "help",
        examples: ["Can you help me?", "Thank you for your help"]
      },
      "sorry": {
        translations: { "es": "lo siento" },
        definition: "Feeling regret or sadness about something",
        partOfSpeech: "adjective/interjection",
        pronunciation: "SAW-ree",
        examples: ["I'm sorry for being late", "Sorry, I didn't hear you"]
      },
      "love": {
        translations: { "es": "amor" },
        definition: "An intense feeling of deep affection",
        partOfSpeech: "noun/verb",
        pronunciation: "luv",
        examples: ["I love my family", "Love is important"]
      },
      "today": {
        translations: { "es": "hoy" },
        definition: "On the current day",
        partOfSpeech: "adverb",
        pronunciation: "tuh-DAY",
        examples: ["What are you doing today?", "Today is beautiful"]
      }
    }
  };


const getDynamicDefinition = async (word, sourceLanguage = "en", targetLanguage = "es") => {
    const lowerWord = word.toLowerCase(); 
    if (localDictionary[lowerWord] && localDictionary[sourceLanguage][lowerWord]){
        return localDictionary[sourceLanguage][lowerWord];
    }
    return null;
};

const saveWordToUserDictionary = async (userId, word, languageCode, definitionData) => {
    try {
        // API route not setup yet. Database implementation features need to be checked for need first.
        const response = await fetch('/api/user-dictionary', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                userId,
                word,
                languageCode,
                definitionData
            }),
        });
        
        if (!response.ok) {
            throw new Error('Failed to save word to dictionary');
        }
        
        return await response.json();
    } catch (error) {
        console.error('Error saving word to dictionary:', error);
        throw error;
    }
};

// Function to get user's saved words
const getUserSavedWords = async (userId, languageCode) => {
    try {
        // Example implementation
        const response = await fetch(`/api/user-dictionary/${userId}?language=${languageCode}`);
        
        if (!response.ok) {
            throw new Error('Failed to fetch saved words');
        }
        
        return await response.json();
    } catch (error) {
        console.error('Error fetching saved words:', error);
        throw error;
    }
};

// Function to remove a word from user's dictionary
const removeWordFromUserDictionary = async (userId, wordId) => {
    try {
        const response = await fetch(`/api/user-dictionary/${userId}/${wordId}`, {
            method: 'DELETE',
        });
        
        if (!response.ok) {
            throw new Error('Failed to remove word from dictionary');
        }
        
        return await response.json();
    } catch (error) {
        console.error('Error removing word from dictionary:', error);
        throw error;
    }
};

export {
    getDynamicDefinition,
    saveWordToUserDictionary,
    getUserSavedWords,
    removeWordFromUserDictionary,
    localDictionary
};

